<!--Searching by targa-->
<form id="search-form">
  <div class="mb-3 row justify-content-center">
    <label for="table-filtering-search" class="col-xs-3 col-sm-auto col-form-label">Inserisci la targa del
      veicolo:</label>
    <div class="col-xs-3 col-sm-auto">
      <input id="table-filtering-search" class="form-control" type="text" [formControl]="filter" />
      <!--(input)="setupFilter()"-->
    </div>
  </div>
</form>

<h2 class="text-center">{{ tipo | uppercase }}</h2>

<!--Spinner-->
<div *ngIf="spinner" class="d-flex justify-content-center" id="spinner">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-striped ms-2">
    <thead>
      <tr>
        <th scope="col" class="text-center">Targa</th>
        <th scope="col" class="text-center">Telaio</th>
        <th scope="col" class="text-center">Nr. id {{ tipo }}</th>
        <th scope="col" class="text-center">Nr. id. veicolo</th>
        <th scope="col" class="text-center">Agenzia</th>
        <th scope="col" class="text-center">Data pagamento</th>
        <th scope="col" class="text-center">Inizio validità</th>
        <th scope="col" class="text-center">Fine validità</th>
        <th scope="col" class="text-center">Importo</th>
        <th scope="col" class="text-center">Polizza</th>
        <th scope="col" class="text-center">Note</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let manutenzione of manutenzioni">
        <td *ngIf="manutenzione.targa != null" class="text-truncate text-center">{{ manutenzione.targa }}&nbsp;</td>
        <td *ngIf="manutenzione.targa == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.telaio != null" class="text-truncate text-center">{{ manutenzione.telaio }}&nbsp;</td>
        <td *ngIf="manutenzione.telaio == null" class="text-center"> - &nbsp;</td>
        <td class="text-truncate text-center">{{ manutenzione.id }}&nbsp;</td>
        <td *ngIf="manutenzione.id_veicolo != null" class="text-center text-truncate">{{ manutenzione.id_veicolo
          }}&nbsp;</td>
        <td *ngIf="manutenzione.id_veicolo == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.agenzia != null" class="text-truncate text-center">{{ manutenzione.agenzia }}&nbsp;</td>
        <td *ngIf="manutenzione.agenzia == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.data_pagamento != null" class="text-truncate text-center">{{ manutenzione.data_pagamento
          | slice:0:10 }}&nbsp;</td>
        <td *ngIf="manutenzione.data_pagamento == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.inizio_validita != null" class="text-truncate text-center">{{
          manutenzione.inizio_validita | slice:0:10 }}&nbsp;</td>
        <td *ngIf="manutenzione.inizio_validita == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.fine_validita != null" class="text-truncate text-center">{{ manutenzione.fine_validita |
          slice:0:10 }}&nbsp;</td>
        <td *ngIf="manutenzione.fine_validita == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.importo != null" class="text-truncate text-center">{{ manutenzione.importo }}€&nbsp;
        </td>
        <td *ngIf="manutenzione.importo == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.polizza != null" class="text-truncate text-center">{{ manutenzione.polizza }}&nbsp;</td>
        <td *ngIf="manutenzione.polizza == null" class="text-center"> - &nbsp;</td>
        <td *ngIf="manutenzione.note != null" class="text-truncate text-center">{{ manutenzione.note }}&nbsp;</td>
        <td *ngIf="manutenzione.note == null" class="text-center"> - &nbsp;</td>
        <td class="d-flex">
          <a [routerLink]="['manutenzioni-details', manutenzione.id]"><i class="fa-solid fa-circle-info"></i></a>
          <a [routerLink]="['manutenzioni-edit', manutenzione.id]"><i class="fa-solid fa-pen-to-square"></i></a>
          <a [routerLink]="['manutenzioni-delete', manutenzione.id]"><i class="fa-solid fa-trash"></i></a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!--Pagination-->
<div class="d-flex flex-column flex-lg-row justify-content-between p-2 ms-2">
  <ngb-pagination [collectionSize]="myArraySize" [(page)]="page" [pageSize]="pageSize"
    (pageChange)="getAllManutenzioni()" [maxSize]="4" [rotate]="true" [boundaryLinks]="true" [directionLinks]="true"
    id="pag">
    >
  </ngb-pagination>

  <!--<select
    class="form-select"
    style="width: auto"
    [(ngModel)]="pageSize"
    (ngModelChange)="refreshManutenzioni()"
    name="pagination"
  >
    <option [ngValue]="2">Visualizza 2 manutenzioni per pagina</option>
    <option [ngValue]="4">Visualizza 4 manutenzioni per pagina</option>
    <option [ngValue]="6">Visualizza 6 manutenzioni per pagina</option>
  </select>-->
</div>

<hr />
<!--Create-->
<a class="btn btn-primary my-btn" routerLink='./create-manutenzione'>Nuova {{ tipo }}</a>