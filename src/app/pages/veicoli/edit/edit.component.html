<div class="d-flex flex-column align-items-center container">
  <h2 class="m-4">Modifica veicolo</h2>
  <form #modificaVeicoloForm="ngForm">
    <div class="row row-cols-2 row-cols-md-3">
      <!--Tipo veicolo-->
      <div class="mb-3 col">
        <label for="change_tipo_veicolo" class="form-label">Tipo veicolo</label>
        <select
          id="change_tipo_veicolo"
          class="form-select"
          [(ngModel)]="selectedTipoVId"
          (ngModelChange)="onTipeVChange($event)"
          name="tipo_veicolo_nome"
          #tipo_veicolo_nome="ngModel"
        >
          <option
            *ngFor="let tipoVeicolo of tipiVeicoli"
            [value]="tipoVeicolo.id"
          >
            {{ tipoVeicolo.nome }}
          </option>
        </select>
      </div>

      <!--Marca-->
      <div class="mb-3 col">
        <label for="change_marca" class="form-label">Marca</label>
        <select
          id="change_marca"
          class="form-select"
          [(ngModel)]="selectedMarcaId"
          (ngModelChange)="onMarcaChange($event)"
          name="marca"
          #marca="ngModel"
        >
          <option *ngFor="let marca of marche" [value]="marca.id">
            {{ marca.nome }}
          </option>
        </select>
      </div>

      <!--Modello-->
      <div class="mb-3 col">
        <label for="change_modello" class="form-label">Modello</label>
        <select
          id="change_modello"
          class="form-select"
          [(ngModel)]="selectedModelloId"
          (ngModelChange)="onModelloChange($event)"
          name="modello"
          #modello="ngModel"
        >
          <option *ngFor="let modello of modelli" [value]="modello.id">
            {{ modello.nome }}
          </option>
        </select>
      </div>

      <!--Cilindrata-->
      <div class="mb-3 col">
        <label for="change_cilindrata" class="form-label">Cilindrata</label>
        <input
          id="change_cilindrata"
          type="number"
          name="cilindrata"
          [(ngModel)]="veicolo.cilindrata"
          placeholder="Inserisci cilindrata"
          class="form-control"
          #cilindrata="ngModel"
        />
      </div>

      <!--Colore-->
      <div class="mb-3 col">
        <label for="change_colore" class="form-label">Colore</label>
        <input
          id="change_colore"
          type="text"
          name="colore"
          [(ngModel)]="veicolo.colore"
          placeholder="Inserisci il colore"
          class="form-control"
          #colore="ngModel"
        />
      </div>

      <!--Destinazione d'uso-->
      <div class="mb-3 col">
        <label for="change_destinazioneUso" class="form-label"
          >Destinazione d'uso</label
        >
        <select
          id="change_destinazioneUso"
          class="form-select"
          [(ngModel)]="selectedDestinazioneId"
          (ngModelChange)="onDestinazioneUsoChange($event)"
          name="destinazioneUso"
        >
          <option
            *ngFor="let destinazione of destinazioni"
            [value]="destinazione.id"
          >
            {{ destinazione.nome }}
          </option>
        </select>
      </div>

      <!--Massa-->
      <div class="mb-3 col">
        <label for="change_massa" class="form-label">Massa</label>
        <input
          id="change_massa"
          type="text"
          name="massa"
          pattern="[0-9]*"
          min="0"
          [(ngModel)]="veicolo.massa"
          placeholder="Inserisci la massa"
          class="form-control"
        />
      </div>

      <!--Numero assi-->
      <div class="mb-3 col">
        <label for="change_numeroAssi" class="form-label">Numero Assi</label>
        <input
          id="change_numeroAssi"
          type="number"
          name="numero_assi"
          min="0"
          [(ngModel)]="veicolo.numero_assi"
          placeholder="Inserisci il numero assi"
          class="form-control"
        />
      </div>

      <!--Portata-->
      <div class="mb-3 col">
        <label for="change_portata" class="form-label">Portata</label>
        <input
          id="change_portata"
          type="number"
          name="portata"
          min="0"
          [(ngModel)]="veicolo.portata"
          placeholder="Inserisci la portata"
          class="form-control"
        />
      </div>

      <!--Potenza-->
      <div class="mb-3 col">
        <label for="change_potenza" class="form-label">Potenza</label>
        <input
          id="change_potenza"
          type="number"
          name="potenza"
          min="0"
          [(ngModel)]="veicolo.potenza"
          placeholder="Inserisci potenza"
          class="form-control"
        />
      </div>

      <!--Società-->
      <div class="mb-3 col">
        <label for="change_societa" class="form-label">Società</label>
        <select
          id="change_societa"
          class="form-select"
          [(ngModel)]="selectedSocietaId"
          (ngModelChange)="onSocietaChange($event)"
          name="societa"
        >
          <option *ngFor="let societa of societas" [value]="societa.id">
            {{ societa.nome }}
          </option>
        </select>
      </div>

      <!--Targa ----- LA MODIFICA DELLA TARGA E DELLA DATA D'IMMATRICOLAZIONE DEVONO ESSERE GESTTE IN UNA CRUD A PARTE CHE COMUNICHI DIRETTAMENTE CON LE RELATIVE TABELLE-->
      <div class="mb-3 col">
        <label for="change_targa" class="form-label">Targa</label>
        <input
          id="change_targa"
          type="text"
          name="targa"
          [(ngModel)]="veicolo.targa"
          placeholder="Inserisci la targa"
          class="form-control"
        />
      </div>

      <!--Alimentazione-->
      <div class="mb-3 col">
        <label for="change_alimentazione" class="form-label"
          >Alimentazione</label
        >
        <select
          id="change_alimentazione"
          class="form-select"
          [(ngModel)]="selectedAlimentazioneId"
          (ngModelChange)="onAlimentazioneChange($event)"
          name="alimentazione"
        >
          <option
            *ngFor="let alimentazione of alimentazioni"
            [value]="alimentazione.id"
          >
            {{ alimentazione.nome }}
          </option>
        </select>
      </div>

      <!--Allestimento-->
      <div class="mb-3 col">
        <label for="change_allestimento" class="form-label">Allestimento</label>
        <select
          id="change_allestimento"
          class="form-select"
          [(ngModel)]="selectedAllestimentoId"
          (ngModelChange)="onAllestimentoChange($event)"
          name="allestimento"
        >
          <option
            *ngFor="let allestimento of allestimenti"
            [value]="allestimento.id"
          >
            {{ allestimento.nome }}
          </option>
        </select>
      </div>

      <!--Tipo asse-->
      <div class="mb-3 col">
        <label for="change_tipoAsse" class="form-label">Tipo asse</label>
        <select
          id="change_tipoAsse"
          class="form-select"
          [(ngModel)]="selectedTipoAsseId"
          (ngModelChange)="onTipoAsseChange($event)"
          name="tipoAsse"
        >
          <option *ngFor="let tipoAsse of tipiAsse" [value]="tipoAsse.id">
            {{ tipoAsse.nome }}
          </option>
        </select>
      </div>

      <!--Cambio-->
      <div class="mb-3 col">
        <label for="change_cambio" class="form-label">Cambio</label>
        <select
          id="change_cambio"
          class="form-select"
          [(ngModel)]="selectedTipoCambioId"
          (ngModelChange)="onCambioChange($event)"
          name="cambio"
        >
          <option *ngFor="let tipoCambio of tipiCambio" [value]="tipoCambio.id">
            {{ tipoCambio.nome }}
          </option>
        </select>
      </div>

      <!--Data immatricolazione-->
      <div class="mb-3 col">
        <label for="data_immatricolazione" class="form-label"
          >Data immatricolazione</label
        >
        <app-datepicker
          [(ngModel)]="data_immatricolazione"
          (dateChange)="handleDateChange($event)"
          name="data_immatricolazione"
        ></app-datepicker>
      </div>

      <!--Larghezza esterna-->
      <div class="mb-3 col">
        <label for="larghezza_esterna" class="form-label">Larghezza esterna</label>
        <input
          id="larghezza_esterna"
          type="number"
          min="0"
          name="larghezza_esterna"
          [(ngModel)]="veicolo.larghezza_esterna"
          placeholder="Inserisci la larghezza esterna"
          class="form-control"
        />
      </div>

      <!--Lunghezza esterna-->
      <div class="mb-3 col">
        <label for="lunghezza_esterna" class="form-label">Lunghezza esterna</label>
        <input
          id="lunghezza_esterna"
          type="number"
          name="lunghezza_esterna"
          [(ngModel)]="veicolo.lunghezza_esterna"
          placeholder="Inserisci la lunghezza esterna"
          class="form-control"
        />
      </div>

      <!--Note-->
      <div class="mb-3 col">
        <label for="note" class="form-label">Note</label>
        <input
          id="note"
          type="text"
          name="note"
          [(ngModel)]="veicolo.note"
          placeholder="Inserisci eventuali note"
          class="form-control"
          #note="ngModel"
        />
      </div>

      <!--Altre caratteristiche-->
      <div class="mb-3 col">
        <label for="altre_caratteristiche" class="form-label">Altre caratteristiche</label>
        <input
          id="altre_caratteristiche"
          type="text"
          name="altre_caratteristiche"
          [(ngModel)]="veicolo.altre_caratteristiche"
          placeholder="Informazioni aggiuntive"
          class="form-control"
          #altre_caratteristiche="ngModel"
        />
      </div>

      <div class="container w-100">
        <div class="row">
          <!--Stato-->
          <div class="mb-3 col col-12 col-md-6 d-flex flex-column">
            <label for="nome_stato" class="form-label d-block">Stato</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="stato" id="irregolare" value="3"
                [(ngModel)]="selectedStatoId" (ngModelChange)="onStatoChange(selectedStatoId)">
              <label class="form-check-label" for="irregolare">Irregolare</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="stato" id="gravementeIrr" value="2"
                [(ngModel)]="selectedStatoId" (ngModelChange)="onStatoChange(selectedStatoId)">
              <label class="form-check-label" for="gravementeIrr">Gravemente irregolare</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="stato" id="regolare" value="1" [(ngModel)]="selectedStatoId"
                (ngModelChange)="onStatoChange(selectedStatoId)">
              <label class="form-check-label" for="regolare">Regolare</label>
            </div>
          </div>

      <!--Disponibilità-->
      <div class="mb-3 col col-12 col-md-6 d-flex flex-column">
        <label for="nome_disponibilita" class="form-label d-block">
          Disponibilità
        </label>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="radio" name="disponibilita" id="disponibile" value="1"
            [(ngModel)]="selectedDisponibilitaId" (ngModelChange)="onDisponibilitaChange(selectedDisponibilitaId)">
          <label class="form-check-label" for="disponibile">Disponibile</label>
        </div>
        <div class="form-check form-check-inline">
  
          <input class="form-check-input" type="radio" name="disponibilita" id="nonDisponibile" value="2"
            [(ngModel)]="selectedDisponibilitaId" (ngModelChange)="onDisponibilitaChange(selectedDisponibilitaId)">
          <label class="form-check-label" for="nonDisponibile">Non disponibile</label>
        </div>
      </div>
    </div>
  </div>

      <button
        type="submit"
        class="btn my-btn btn-primary"
        (click)="editVeicolo()"
      >
        Salva modifiche
      </button>
    </div>
  </form>
</div>
